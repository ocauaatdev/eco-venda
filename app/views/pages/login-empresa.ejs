<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/4494a50fc2.js" crossorigin="anonymous"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@1.0.4/dist/simple-notify.css" />
    
    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script> 

    <!-- Jquery Mascaras -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <title>Login Empresa</title>
</head>
<body>
    <section>
        <form action="/login-empresa" method="post">
            <div class="formHead">
                <a href="/home-page">
                    <i class="fa-solid fa-house home"></i> <span>Inicio</span>
                </a>
                <img class="logo" src="/imagem/Logo/LogoLado Branco.png" alt="">
                <h1>Login Empresa</h1>
            </div>

            <!-- ============ Nome Empresa =========== -->
            <h3>Nome da Empresa:</h3>
            <input type="text" name="empresa" id="empresa" placeholder="Digite o nome da empresa" required> 

            <!-- ============ Senha =========== -->
            <h3>Senha:</h3> 
            <div class="senha-container">
                <input type="password" name="senha" id="senha" placeholder="Digite sua senha" required>
                <span class="eye-icon">
                    <i class="fa-solid fa-eye fa-eye-slash eye-senha" id="btn-senha" onclick="mostrarSenha()"></i>
                </span>
            </div>
            
            <button onclick="logar()">Entrar</button>

            <!-- Exibe mensagem de erro se houver -->
            <% if (listaErros && listaErros.length > 0) { %>
                <div class="errors">
                    <% listaErros.forEach(function(erro) { %>
                        <p style="color: red;"><%= erro.msg %></p>
                    <% }); %>
                </div>
            <% } %>

            <a href="/cadastro-empresa">Precisa cadastrar sua empresa? Clique aqui!</a>
            <a href="/recuperar-senha-empresa">Esqueci minha senha</a>
        </form>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/simple-notify@1.0.4/dist/simple-notify.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('cadastro-empresa') === 'sucesso'){
            
            new Notify({
              status: 'success',
              title: 'Sucesso',
              text: 'Conta ativada, use seu e-mail e senha para acessar o seu perfil',
              effect: 'fade',
              speed: 300,
              customClass: null,
              customIcon: null,
              showIcon: true,
              showCloseButton: true,
              autoclose: true,
              autotimeout: 3000,
              gap: 20,
              distance: 20,
              type: 'outline',
              position: 'right top'
            })
          }
          if(urlParams.get('login-empresa') === 'senha'){
            
            new Notify({
              status: 'success',
              title: 'Recuperação de senha',
              text: 'Enviamos um email com instruções para resetar sua senha',
              effect: 'fade',
              speed: 300,
              customClass: null,
              customIcon: null,
              showIcon: true,
              showCloseButton: true,
              autoclose: true,
              autotimeout: 3000,
              gap: 20,
              distance: 20,
              type: 'outline',
              position: 'right top'
            })
          }
          if(urlParams.get('ativar-conta') === 'erro'){
            
            new Notify({
              status: 'error',
              title: 'Ativação de conta',
              text: 'Token inválido ou expirado',
              effect: 'fade',
              speed: 300,
              customClass: null,
              customIcon: null,
              showIcon: true,
              showCloseButton: true,
              autoclose: true,
              autotimeout: 3000,
              gap: 20,
              distance: 20,
              type: 'outline',
              position: 'right top'
            })
          }
          if(urlParams.get('login-empresa') === 'alteracao'){
            
            new Notify({
              status: 'success',
              title: 'Perfil alterado',
              text: 'Nova senha registrada',
              effect: 'fade',
              speed: 300,
              customClass: null,
              customIcon: null,
              showIcon: true,
              showCloseButton: true,
              autoclose: true,
              autotimeout: 3000,
              gap: 20,
              distance: 20,
              type: 'outline',
              position: 'right top'
            })
          }
          </script>
    <script src="/js/senha.js"></script>
    <script src="/js/login.js"></script>
</body>
</html>
